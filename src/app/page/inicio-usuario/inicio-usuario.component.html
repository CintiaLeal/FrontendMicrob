<app-header *ngIf="tipoU === 'Common-User'"></app-header>
<app-header-moderator *ngIf="tipoU === 'Moderator'"></app-header-moderator>
<div class="container" *ngIf="tipoU === 'Common-User' || tipoU === 'Moderator'">
  <div class="section costados"></div>
  <div class="section section1">
    <mat-card class="example-card posicion">
      <mat-card-header>
        <mat-card-title-group>
          <mat-card-title>{{usuario?.firstName}} </mat-card-title>
          <mat-card-subtitle>{{usuario?.userName}}</mat-card-subtitle>
          <img class="imgPERFIL" src={{usuario?.profileImage}} *ngIf="contenidoVisible !== 'perfil'">
        </mat-card-title-group>
      </mat-card-header>
      <br>
      <mat-card-content>
        <form [formGroup]="registrarForm">
          <mat-form-field class="example-full-width a">
            <mat-label>Escribir</mat-label>
            <textarea class="colorletras a " matInput [value]="inputText" maxlength="250" formControlName="text"
              placeholder="Publica..."></textarea>
          </mat-form-field>
          <div *ngIf="base64Image" class="image-container">
            <img [src]="base64Image" alt="Imagen" class="img">
            <button (click)="removeImage()" class="remove-button">
              <mat-icon>close</mat-icon>
            </button>
          </div>
          <input hidden (change)="onFileSelected($event)" #fileInput type="file" formControlName="logo">
          <a type="button" (click)="fileInput.click()" *ngIf="!base64Image">
            <mat-icon>attach_file</mat-icon>
          </a>
          <div>
            <button mat-raised-button color="primary" (click)="newPost()"
              [disabled]="!registrarForm.get('text')?.value">Publicar</button>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  </div>

  <div class="section section2">
    <div *ngIf="contenidoVisible === 'home'">
      <div class="scrollable-content" #scrollableContent>
        <div *ngFor="let x of inicioTodosPost">
          <br>
          <mat-card>
            <mat-card-header>
              <div mat-card-avatar class="example-header-image"><img class="imgPostUser"
                  src={{x.userOwner.profileImage}}>
              </div>
              <mat-card-title> {{x.userOwner.firstName}}</mat-card-title>
              <mat-card-subtitle >
                {{ x.userOwner.userName }} | {{ x.created | date:'dd/MM/yyyy' }}
              </mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <p>
                {{x.text}}
              </p>
              <img class="imgContenido" *ngIf="x.attachment" src={{x.attachment}}>
              <p class="mgPost">{{ x.likes.length }} ❤</p>

            </mat-card-content>
            <mat-card-actions>
              <div class="example-button-row">
                <button mat-icon-button [color]="buttonClicked ? 'warn' : buttonColor" (click)="cambiarColor()">
                  <mat-icon class="icon">favorite</mat-icon>
                </button>             
                <button mat-icon-button (click)="alternarVisibilidad(x.postId)">
                  <mat-icon class="icon">chat_bubble</mat-icon>
                </button>
              </div>
            </mat-card-actions>

            <div *ngIf="mostrarDiv[x.postId]">
              <mat-card-content>
                <form [formGroup]="newComentario">
                  <input class="x" formControlName="textComentario">
                  <button mat-mini-fab color="accent" [disabled]="!newComentario.get('textComentario')?.value"
                    (click)="newComentarioPost(x.postId)">
                    <mat-icon>arrow_forward</mat-icon>
                  </button>
                </form>
                <mat-card-content>
                  <div *ngFor="let comentario of x.comments">
                    <br>
                    <mat-card>
                      
                    <mat-card-header>
                      <mat-card-title>{{comentario.userOwner.firstName}}</mat-card-title>
                      <mat-card-subtitle>
                        {{comentario.userOwner.userName}} | {{comentario.created | date:'dd/MM/yyyy HH:mm'}}
                      </mat-card-subtitle>
                    </mat-card-header>
                    {{ comentario.text }}
                    
                    </mat-card>
                  </div>
                </mat-card-content>

              </mat-card-content>
            </div>
          </mat-card>
        </div>
      </div>
    </div>
    <div *ngIf="contenidoVisible === 'comentarPost'">
      <p>comentarpost</p>
    </div>

    <div *ngIf="contenidoVisible === 'favorito'">
      <div class="scrollable-content">
        <mat-card>
          <mat-card-header>
            <div mat-card-avatar class="example-header-image"></div>
            <mat-card-title>Grace Hopper</mat-card-title>
            <mat-card-subtitle>@loremipsum</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p>
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed tincidunt urna quis velit commodo,
              nec fringilla lorem dictum. Integer vehicula massa at nisl tristique, eu hendrerit ex malesuada.
              Vivamus in pharetra urna, vel iaculis orci.
            </p>
          </mat-card-content>
          <mat-card-actions>
            <div class="example-button-row">
              <button mat-icon-button matTooltip="Basic" aria-label="Example icon-button with a heart icon">
                <mat-icon class="icon">favorite</mat-icon>
              </button>
              <button mat-icon-button matTooltip="Basic" aria-label="Example icon-button with a heart icon">
                <mat-icon class="icon">redo</mat-icon>
              </button>
              <button mat-icon-button matTooltip="Basic" aria-label="Example icon-button with a heart icon">
                <mat-icon class="icon">chat_bubble</mat-icon>
              </button>
            </div>
          </mat-card-actions>
        </mat-card>
        <br>
        <mat-card>
          <mat-card-header>
            <div mat-card-avatar class="example-header-image"></div>
            <mat-card-title>Grace Hopper</mat-card-title>
            <mat-card-subtitle>@loremipsum</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p>
              FAVORITO Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed tincidunt urna quis velit commodo,
              nec fringilla lorem dictum. Integer vehicula massa at nisl tristique, eu hendrerit ex malesuada.
              Vivamus in pharetra urna, vel iaculis orci.
            </p>
          </mat-card-content>
          <mat-card-actions>
            <div class="example-button-row">
              <button mat-icon-button matTooltip="Basic" aria-label="Example icon-button with a heart icon">
                <mat-icon class="icon">favorite</mat-icon>
              </button>
              <button mat-icon-button matTooltip="Basic" aria-label="Example icon-button with a heart icon">
                <mat-icon class="icon">redo</mat-icon>
              </button>
              <button mat-icon-button matTooltip="Basic" aria-label="Example icon-button with a heart icon">
                <mat-icon class="icon">chat_bubble</mat-icon>
              </button>
            </div>
          </mat-card-actions>
        </mat-card>
        <br>
        <mat-card>
          <mat-card-header>
            <div mat-card-avatar class="example-header-image"></div>
            <mat-card-title>Grace Hopper</mat-card-title>
            <mat-card-subtitle>@loremipsum</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p>
              Regístrate hoy mismo para comenzar tu viaje en Microb y únete a la conversación global. ¡Te estamos
              esperando! Integer vehicula massa at nisl tristique, eu hendrerit ex malesuada.
              Vivamus in pharetra urna, vel iaculis orci.
            </p>
          </mat-card-content>
          <mat-card-actions>
            <div class="example-button-row">
              <button mat-icon-button matTooltip="Basic" aria-label="Example icon-button with a heart icon">
                <mat-icon class="icon">favorite</mat-icon>
              </button>
              <button mat-icon-button matTooltip="Basic" aria-label="Example icon-button with a heart icon">
                <mat-icon class="icon">redo</mat-icon>
              </button>
              <button mat-icon-button matTooltip="Basic" aria-label="Example icon-button with a heart icon">
                <mat-icon class="icon">chat_bubble</mat-icon>
              </button>
            </div>
          </mat-card-actions>
        </mat-card>
      </div>
    </div>
    <div *ngIf="contenidoVisible === 'perfil'">
      <div class="scrollable-content">
        <div class="">
          <div class="divPerfilcolor">
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
          </div>
          <div class="perfil-containerImgUser">
            <img class="imgPerfilUser" src={{usuario?.profileImage}}>
          </div>
          <h1 class="textoMiPerfil">{{usuario?.firstName}} {{usuario?.lastName}}</h1>
          <h4 class="textoMiPerfilArroba">{{usuario?.userName}}</h4>
          <div>
            <p>{{usuario?.biography}}</p>
          </div>
          <h4>
            <mat-icon class="iconDiaCumple">calendar_month</mat-icon>
            {{ usuario?.birthday | date:'dd/MM/yyyy' }}
          </h4>
          <p>Seguidores 1{{usuario?.followUsers}}</p>
        </div>
        <hr>
        <div *ngFor="let x of misPost">
          <br>
          <mat-card>
            <mat-card-header>
              <div mat-card-avatar class="example-header-image"><img class="imgPostUser" src={{usuario?.profileImage}}>
              </div>
              <mat-card-title> {{usuario?.firstName}}</mat-card-title>
              <mat-card-subtitle> {{usuario?.userName}} | {{ x.created | date:'dd/MM/yyyy HH:mm' }}</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <p>
                {{x.text}}
              </p>
              <img class="imgContenido" *ngIf="x.attachment" src={{x.attachment}}>
            </mat-card-content>
            <mat-card-actions>
              <div class="example-button-row">
                <button mat-icon-button matTooltip="Basic" aria-label="Example icon-button with a heart icon">
                  <mat-icon class="icon">favorite</mat-icon>
                </button>
                <button mat-icon-button matTooltip="Basic" aria-label="Example icon-button with a heart icon">
                  <mat-icon class="icon">redo</mat-icon>
                </button>
                <button mat-icon-button matTooltip="Basic" aria-label="Example icon-button with a heart icon">
                  <mat-icon class="icon">chat_bubble</mat-icon>
                </button>
              </div>
            </mat-card-actions>
          </mat-card>
        </div>
      </div>
    </div>

    <div *ngIf="contenidoVisible === 'notificacion'">
      <div class="scrollable-content">
        <mat-card>
          <mat-card-content>
            <p>Notificacion
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed tincidunt urna quis velit commodo,
              nec fringilla lorem dictum. Integer vehicula massa at nisl tristique, eu hendrerit ex malesuada.
              Vivamus in pharetra urna, vel iaculis orci.
            </p>
          </mat-card-content>
        </mat-card>
      </div>
    </div>
  </div>
  <div class="sect section3">
    <div class="caja">
      <div class="tendencias-container">
        <h2>Tendencias</h2>
        <ul class="tendencias-list">
          <li class="tendencia">
            <span class="hashtag">#TendenciaUsuarios</span>
            <span class="count">500K</span>
          </li>
          <li class="tendencia">
            <span class="hashtag">#Tendencia2</span>
            <span class="count">300K</span>
          </li>
          <li class="tendencia">
            <span class="hashtag">#Tendencia22</span>
            <span class="count">300K</span>
          </li>
        </ul>
      </div>
    </div>
    <div class="caja3">
      <ul class="menu-list">
        <li>
          <a (click)="mostrarContenido('home'); mostrarBange('home'); getPosteosInicio();">
            <mat-icon *ngIf="contador > 0" [matBadge]="contador" class="icon" (click)="getPosteosInicio()">home</mat-icon>
  <mat-icon *ngIf="contador === 0" class="icon" (click)="getPosteosInicio()">home</mat-icon>
            <span class="text">Home</span>
          </a>
        </li>
        <li>
          <a (click)="mostrarContenido('perfil')">
            <mat-icon class="icon">person</mat-icon>
            <span class="text">Mi Perfil</span>
          </a>
        </li>
        <li>
          <a (click)="mostrarContenido('notificacion')">
            <mat-icon class="icon">notifications</mat-icon>
            <span class="text">Notificaciones</span>
          </a>
        </li>
        <li>
          <a (click)="mostrarContenido('favorito')">
            <mat-icon class="icon">favorite</mat-icon>
            <span class="text">Favorito</span>
          </a>
        </li>
        <li>
          <hr>
        </li>
        <li>
          <a>
            <mat-icon class="icon" [matMenuTriggerFor]="menu">settings</mat-icon>
            <span class="text">Ajustes</span>
          </a>
          <mat-menu #menu="matMenu">
            <button mat-menu-item>Modificar</button>
            <button mat-menu-item>Modificar</button>
          </mat-menu>
        </li>
      </ul>
    </div>
  </div>
</div>

<div *ngIf="tipoU !== 'Common-User' && tipoU !== 'Moderator'">
  <div class="contenedorError">
    <div class="cajaError">
      <h1 class="h1Error">No tienes permiso para acceder aquí. Volviendo al inicio.</h1>
    </div>
    <div class="cajaError"><img class="imgError"></div>
    <div class="cajaError">
      <button mat-raised-button routerLink="/" color="primary" class="btnError">Volver</button>
    </div>
  </div>
</div>